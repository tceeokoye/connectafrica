(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9093],{1018:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=1018,e.exports=t},51805:function(e,t,a){Promise.resolve().then(a.bind(a,92850))},92850:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(57437),s=a(2265),n=a(85237),i=a(12381),l=a(99397),o=a(15868),d=a(18930),c=a(42208),u=a(57586),m=a(32489),f=a(99376),x=a(14438),p=a(32603),g=a(89520);a(21005);var h=a(15291);let b=["Education","Community","Elderly","Empowerment","Children","Healthcare","Infrastructure","Events","Others","Food","Emergency"];function y(e){let{isOpen:t,onClose:a,campaign:l,onSave:o}=e,[d,c]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[w,C]=(0,s.useState)(null),[k,z]=(0,s.useState)(null),[S,E]=(0,s.useState)(!1),[Z,_]=(0,s.useState)(null),[A,D]=(0,s.useState)(null),[O,M]=(0,s.useState)(""),R=(0,p.v9)(e=>e.token.token),P=(0,f.useRouter)();(0,s.useEffect)(()=>{l?(M(l.category),c(l.title),j(l.description),N(String(l.amount)),_(new Date(l.startDate)),D(new Date(l.endDate)),z(l.imageUrl)):(M(""),c(""),j(""),N(""),C(null),z(null),_(null),D(null))},[l]);let U=async e=>{if(e.preventDefault(),E(!0),!R){E(!1),a(),x.A.error("Login expired, redirecting..."),P.push("/admin/login");return}if(!d||!y||!v||!Z||!A||!O||!l&&!w){E(!1),x.A.error("All fields including image and amount are required");return}try{let e=k;w&&(e=await new Promise((e,t)=>{let a=new FileReader;a.readAsDataURL(w),a.onload=()=>e(a.result),a.onerror=e=>t(e)}));let t=Z.toISOString(),r=A.toISOString(),s=l?"/api/v1/admin/campaign/edit/".concat(l._id):"/api/v1/admin/campaign/create";if(!l&&"Emergency"===O){let e=await fetch("/api/v1/admin/campaign/emergency-check",{headers:{Authorization:"Bearer ".concat(R)}});if((await e.json()).exists){x.A.error("Only one active Emergency campaign is allowed."),E(!1);return}}let n=await fetch(s,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(R)},body:JSON.stringify({title:d,description:y,amount:v,category:O,startDate:t,endDate:r,imageBase64:e})}),i=await n.json();if(!i.success)throw Error(i.message);x.A.success(l?"Campaign updated!":"Campaign created successfully!"),o&&await o(),a()}catch(e){x.A.error(e.message||"Failed to save campaign")}finally{E(!1)}};return(0,r.jsx)(u.M,{children:t&&(0,r.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,r.jsxs)(n.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[(0,r.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition-colors",children:(0,r.jsx)(m.Z,{size:24})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:l?"Edit Campaign":"New Campaign"}),(0,r.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Title"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Campaign title",className:"w-full px-4 py-3 rounded-xl border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:y,onChange:e=>j(e.target.value),rows:4,placeholder:"Brief campaign description",className:"w-full px-4 py-3 rounded-xl border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Project Amount"}),(0,r.jsx)("input",{type:"number",value:v,onChange:e=>N(e.target.value),placeholder:"Enter project amount",className:"w-full px-4 py-3 rounded-xl border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all"})]}),(0,r.jsxs)(h.Ph,{value:O,onValueChange:M,children:[(0,r.jsx)(h.i4,{children:(0,r.jsx)(h.ki,{placeholder:"Select category"})}),(0,r.jsx)(h.Bw,{position:"popper",className:"max-h-60 overflow-y-auto",children:b.map(e=>(0,r.jsx)(h.Ql,{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Start Date"}),(0,r.jsx)(g.ZP,{selected:Z,onChange:e=>_(e),dateFormat:"MMMM d, yyyy",className:"w-full px-4 py-3 rounded-xl border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all",placeholderText:"Select start date"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"End Date"}),(0,r.jsx)(g.ZP,{selected:A,onChange:e=>D(e),dateFormat:"MMMM d, yyyy",className:"w-full px-4 py-3 rounded-xl border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all",placeholderText:"Select end date"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Campaign Image"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(C(a),z(URL.createObjectURL(a)))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 transition-all"}),k&&(0,r.jsx)("img",{src:k,alt:"Preview",className:"mt-2 w-full h-24 sm:w-32 sm:h-32 md:w-full md:h-40 object-cover rounded-xl border border-gray-200"})]}),(0,r.jsx)(i.z,{type:"submit",variant:"default",className:"w-full mt-4",disabled:S,children:S?l?"Updating...":"Creating...":l?"Update Campaign":"Create Campaign"})]})]})})})}function j(e){let{isOpen:t,onClose:a,campaignId:l,setCampaigns:o}=e,[d,c]=(0,s.useState)(!1),g=(0,f.useRouter)(),h=(0,p.v9)(e=>e.token.token),b=async()=>{if(l&&o){c(!0);try{if(!h){a(),x.A.error("Login expired, redirecting..."),g.push("/admin/login");return}let e=await fetch("/api/v1/admin/campaign/delete/".concat(l),{method:"DELETE",headers:{Authorization:"Bearer ".concat(h)}});if(401===e.status){a(),x.A.error("Session expired, redirecting..."),g.push("/admin/login");return}let t=await e.json();if(!t.success)throw Error(t.message);o(e=>e.filter(e=>e._id!==l)),x.A.success("Campaign deleted successfully"),a()}catch(e){console.error("Delete failed:",e),x.A.error(e.message||"Failed to delete campaign")}finally{c(!1)}}};return(0,r.jsx)(u.M,{children:t&&(0,r.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,r.jsxs)(n.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6 sm:p-8 relative overflow-y-auto",children:[(0,r.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition-colors",children:(0,r.jsx)(m.Z,{size:24})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Delete Campaign"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"Are you sure you want to delete this campaign? This action cannot be undone."}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(i.z,{variant:"outline",onClick:a,children:"Cancel"}),(0,r.jsx)(i.z,{variant:"destructive",onClick:b,disabled:d,children:d?"Deleting...":"Delete"})]})]})})})}var v=a(20438);function N(){let[e,t]=(0,s.useState)(!1),[a,u]=(0,s.useState)([]),[m,f]=(0,s.useState)(null),[x,p]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),[b,N]=(0,s.useState)(!1),w=async()=>{try{N(!0);let e=await fetch("/api/v1/admin/campaign/get"),t=await e.json();t.success&&u(t.campaigns),console.log("campains:",t)}catch(e){console.error("Failed to fetch campaigns:",e)}finally{N(!1)}};(0,s.useEffect)(()=>{w()},[]);let C=e=>Math.min((e.donatedAmount||0)/e.amount*100,100);return(0,r.jsx)(v.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Campaigns"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your organization's campaigns"})]}),(0,r.jsxs)(i.z,{onClick:()=>{f(null),t(!0)},children:[(0,r.jsx)(l.Z,{size:18}),"New Campaign"]})]}),(0,r.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b?(0,r.jsx)("p",{className:"text-center col-span-full",children:"Loading campaigns..."}):0===a.length?(0,r.jsx)("p",{className:"text-center col-span-full",children:"No campaigns available"}):a.map(e=>(0,r.jsxs)("div",{className:"bg-card rounded-xl p-4 shadow-soft flex flex-col relative",children:[" ",(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full bg-primary/90 text-primary-foreground text-xs font-semibold",children:e.category})}),(0,r.jsx)("div",{className:"absolute top-4 left-4",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full  text-primary-foreground text-xs font-semibold flex items-center justify-center ".concat("inprogress"===e.status?"bg-green-700":"completed"===e.status?"bg-blue-500":"bg-red-500"),children:e.status})}),(0,r.jsx)("img",{src:e.imageUrl,alt:e.title,className:"rounded-lg w-full h-48 object-cover mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-3",children:e.description}),(0,r.jsxs)("p",{className:"text-sm font-medium mb-2",children:["Goal: $",e.amount.toLocaleString()," | Collected: $",(e.donatedAmount||0).toLocaleString()]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,r.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(C(e),"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between mt-auto",children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{f(e),t(!0)},children:[(0,r.jsx)(o.Z,{size:16}),"Edit"]}),(0,r.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>{h(e),p(!0)},children:[(0,r.jsx)(d.Z,{size:16}),"Delete"]}),(0,r.jsxs)(i.z,{variant:"secondary",size:"sm",onClick:()=>alert("View details functionality coming soon"),children:[(0,r.jsx)(c.Z,{size:16}),"View"]})]})]},e._id))}),(0,r.jsx)(y,{isOpen:e,onClose:()=>t(!1),campaign:m,onSave:w}),(0,r.jsx)(j,{isOpen:x,onClose:()=>p(!1),campaignId:null==g?void 0:g._id,setCampaigns:u})]})})}},20438:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var r=a(57437),s=a(2265),n=a(27648),i=a(99376),l=a(57586),o=a(85237),d=a(25466),c=a(48736),u=a(95252),m=a(95805),f=a(58293),x=a(88997),p=a(32489),g=a(47692),h=a(12381);let b=[{href:"/admin/dashboard",label:"Dashboard",icon:d.Z},{href:"/admin/campaigns",label:"Campaigns",icon:c.Z},{href:"/admin/blog",label:"Blog",icon:c.Z},{href:"/admin/gallery",label:"Gallery",icon:c.Z},{href:"/admin/donations",label:"Donations",icon:u.Z},{href:"/admin/subscribers",label:"Subscribers",icon:m.Z}];function y(e){let{children:t}=e,[a,d]=(0,s.useState)(!1),c=(0,i.usePathname)();return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsxs)("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-sidebar border-b border-sidebar-border h-16 flex items-center px-4",children:[(0,r.jsx)("button",{onClick:()=>d(!0),className:"text-sidebar-foreground",children:(0,r.jsx)(f.Z,{className:"w-6 h-6"})}),(0,r.jsx)("span",{className:"ml-4 font-display text-lg font-bold text-sidebar-foreground",children:"Admin Panel"})]}),(0,r.jsx)("aside",{className:"fixed top-0 left-0 z-50 h-full w-64 bg-sidebar border-r border-sidebar-border transform transition-transform duration-300 lg:translate-x-0 ".concat(a?"translate-x-0":"-translate-x-full"),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"h-16 flex items-center justify-between px-4 border-b border-sidebar-border",children:[(0,r.jsxs)(n.default,{href:"/",className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-sidebar-primary flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"w-4 h-4 text-sidebar-primary-foreground"})}),(0,r.jsx)("span",{className:"font-display text-lg font-bold text-sidebar-foreground",children:"ConnectAfrica"})]}),(0,r.jsx)("button",{onClick:()=>d(!1),className:"lg:hidden text-sidebar-foreground",children:(0,r.jsx)(p.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:b.map(e=>{let t=c.startsWith(e.href);return(0,r.jsxs)(n.default,{href:e.href,onClick:()=>d(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(t?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,r.jsx)("div",{className:"p-4 border-t border-sidebar-border",children:(0,r.jsx)(n.default,{href:"/",children:(0,r.jsxs)(h.z,{variant:"ghost",className:"w-full justify-start text-sidebar-foreground hover:bg-sidebar-accent",children:[(0,r.jsx)(g.Z,{className:"w-5 h-5 mr-3"}),"Back to Site"]})})})]})}),(0,r.jsx)(l.M,{children:a&&(0,r.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1),className:"fixed inset-0 bg-foreground/50 z-40 lg:hidden"})}),(0,r.jsx)("main",{className:"lg:ml-64 pt-16 lg:pt-0 min-h-screen",children:(0,r.jsx)("div",{className:"p-6",children:t})})]})}},12381:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(57437),s=a(2265),n=a(37053),i=a(90535),l=a(93448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:t,...c})});d.displayName="Button"},15291:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var r=a(57437),s=a(2265),n=a(83837),i=a(40875),l=a(22135),o=a(30401),d=a(93448);let c=n.fC;n.ZA;let u=n.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(x,{})]})})});p.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=n.__.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});g.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.Z0.displayName},93448:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(61994),s=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[7360,5501,2333,6635,7063,2972,2603,4438,1759,4944,2971,2117,1744],function(){return e(e.s=51805)}),_N_E=e.O()}]);