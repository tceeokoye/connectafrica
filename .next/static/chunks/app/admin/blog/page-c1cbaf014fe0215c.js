(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4063],{1762:function(e,s,a){Promise.resolve().then(a.bind(a,3973))},3973:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var t=a(7437),r=a(2265),l=a(8239),i=a(2381),n=a(9397),d=a(2208),o=a(5868),c=a(8930),h=a(7025),x=a(4438),m=a(2603),f=a(9376),u=a(5699),b=a(5426),g=a(438);function j(){let[e,s]=(0,r.useState)(!1),[a,j]=(0,r.useState)(void 0),[p,N]=(0,r.useState)(!0),[y,v]=(0,r.useState)(""),[w,Z]=(0,r.useState)(!1);(0,m.v9)(e=>e.token.token);let k=(0,m.v9)(e=>e.blog.blogs),z=(0,m.I0)(),C=(0,f.useRouter)(),S=async()=>{N(!0);try{let e=await fetch("/api/v1/admin/blog/get"),s=await e.json();if(!s.success)throw Error(s.message||"Failed to fetch blogs");console.log("dtatata",s.blogs),z((0,u.dr)(s.blogs))}catch(e){x.A.error(e.message||"Failed to load blogs"),console.log("error",e.message)}finally{N(!1)}};(0,r.useEffect)(()=>{S()},[]);let E=e=>{j(e),s(!0)},_=e=>{C.push("/admin/dashboard/blog/".concat(e.slug))};return console.log("new blogs",k),(0,t.jsx)(g.Z,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Blog Posts"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage and publish blog posts"})]}),(0,t.jsxs)(i.z,{onClick:()=>{j(void 0),s(!0)},children:[(0,t.jsx)(n.Z,{size:18})," New Post"]})]}),(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card rounded-xl p-6 shadow-soft overflow-x-auto",children:p?(0,t.jsx)("div",{className:"w-full flex justify-center items-center py-12 text-muted-foreground",children:"Fetching your blogs..."}):0===k.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-12",children:"No blogs yet"}):(0,t.jsxs)("table",{className:"w-full table-auto border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-muted-foreground/10",children:[(0,t.jsx)("th",{className:"p-3 text-left",children:"Title"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Author"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Category"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Read Time"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Featured"}),(0,t.jsx)("th",{className:"p-3 text-center",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:k.map(e=>(0,t.jsxs)("tr",{className:"border-t hover:bg-muted-foreground/5",children:[(0,t.jsx)("td",{className:"p-3",children:e.title}),(0,t.jsx)("td",{className:"p-3",children:e.author}),(0,t.jsx)("td",{className:"p-3",children:e.category}),(0,t.jsx)("td",{className:"p-3",children:e.readTime}),(0,t.jsx)("td",{className:"p-3",children:e.featured?"Yes":"No"}),(0,t.jsxs)("td",{className:"p-3 flex justify-center gap-2",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>_(e),children:(0,t.jsx)(d.Z,{size:16})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>E(e),children:(0,t.jsx)(o.Z,{size:16})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{v(e._id),Z(!0)},children:(0,t.jsx)(c.Z,{size:16})})]})]},e._id))})]})}),e&&(0,t.jsx)(h.Z,{isOpen:e,onClose:()=>s(!1),blog:a,onSave:S}),(0,t.jsx)(b.Z,{isOpen:w,onClose:()=>Z(!1),blogId:y})]})})}},438:function(e,s,a){"use strict";a.d(s,{Z:function(){return p}});var t=a(7437),r=a(2265),l=a(7648),i=a(9376),n=a(7586),d=a(8239),o=a(5466),c=a(8736),h=a(5252),x=a(5805),m=a(6840),f=a(8997),u=a(2489),b=a(7692),g=a(2381);let j=[{href:"/admin/dashboard",label:"Dashboard",icon:o.Z},{href:"/admin/campaigns",label:"Campaigns",icon:c.Z},{href:"/admin/blog",label:"Blog",icon:c.Z},{href:"/admin/gallery",label:"Gallery",icon:c.Z},{href:"/admin/donations",label:"Donations",icon:h.Z},{href:"/admin/subscribers",label:"Subscribers",icon:x.Z}];function p(e){let{children:s}=e,[a,o]=(0,r.useState)(!1),c=(0,i.usePathname)();return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsxs)("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-sidebar border-b border-sidebar-border h-16 flex items-center px-4",children:[(0,t.jsx)("button",{onClick:()=>o(!0),className:"text-sidebar-foreground",children:(0,t.jsx)(m.Z,{className:"w-6 h-6"})}),(0,t.jsx)("span",{className:"ml-4 font-display text-lg font-bold text-sidebar-foreground",children:"Admin Panel"})]}),(0,t.jsx)("aside",{className:"fixed top-0 left-0 z-50 h-full w-64 bg-sidebar border-r border-sidebar-border transform transition-transform duration-300 lg:translate-x-0 ".concat(a?"translate-x-0":"-translate-x-full"),children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"h-16 flex items-center justify-between px-4 border-b border-sidebar-border",children:[(0,t.jsxs)(l.default,{href:"/",className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-sidebar-primary flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"w-4 h-4 text-sidebar-primary-foreground"})}),(0,t.jsx)("span",{className:"font-display text-lg font-bold text-sidebar-foreground",children:"ConnectAfrica"})]}),(0,t.jsx)("button",{onClick:()=>o(!1),className:"lg:hidden text-sidebar-foreground",children:(0,t.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:j.map(e=>{let s=c.startsWith(e.href);return(0,t.jsxs)(l.default,{href:e.href,onClick:()=>o(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(s?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),children:[(0,t.jsx)(e.icon,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,t.jsx)("div",{className:"p-4 border-t border-sidebar-border",children:(0,t.jsx)(l.default,{href:"/",children:(0,t.jsxs)(g.z,{variant:"ghost",className:"w-full justify-start text-sidebar-foreground hover:bg-sidebar-accent",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 mr-3"}),"Back to Site"]})})})]})}),(0,t.jsx)(n.M,{children:a&&(0,t.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1),className:"fixed inset-0 bg-foreground/50 z-40 lg:hidden"})}),(0,t.jsx)("main",{className:"lg:ml-64 pt-16 lg:pt-0 min-h-screen",children:(0,t.jsx)("div",{className:"p-6",children:s})})]})}}},function(e){e.O(0,[1646,9755,2972,2603,7281,4438,1759,4206,9676,2971,2117,1744],function(){return e(e.s=1762)}),_N_E=e.O()}]);